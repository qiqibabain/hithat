const a15_0x161d2c=a15_0x2b92;(function(_0x4536c5,_0x2cdbc5){const _0x2d236e=a15_0x2b92,_0x2f8114=_0x4536c5();while(!![]){try{const _0x354ef6=parseInt(_0x2d236e(0x147))/0x1+-parseInt(_0x2d236e(0x15c))/0x2*(parseInt(_0x2d236e(0x12f))/0x3)+-parseInt(_0x2d236e(0x16a))/0x4*(parseInt(_0x2d236e(0x164))/0x5)+-parseInt(_0x2d236e(0x142))/0x6+-parseInt(_0x2d236e(0x152))/0x7*(parseInt(_0x2d236e(0x12c))/0x8)+-parseInt(_0x2d236e(0x156))/0x9*(parseInt(_0x2d236e(0x13d))/0xa)+parseInt(_0x2d236e(0x15a))/0xb*(parseInt(_0x2d236e(0x140))/0xc);if(_0x354ef6===_0x2cdbc5)break;else _0x2f8114['push'](_0x2f8114['shift']());}catch(_0x226b15){_0x2f8114['push'](_0x2f8114['shift']());}}}(a15_0x188a,0x6b525));const a15_0x337ac9=(function(){let _0x37493b=!![];return function(_0x487b64,_0x461fd4){const _0x8ec884=_0x37493b?function(){const _0x11c8ec=a15_0x2b92;if(_0x461fd4){const _0x15ecf6=_0x461fd4[_0x11c8ec(0x12b)](_0x487b64,arguments);return _0x461fd4=null,_0x15ecf6;}}:function(){};return _0x37493b=![],_0x8ec884;};}()),a15_0x5eefde=a15_0x337ac9(this,function(){const _0x5aacf4=a15_0x2b92,_0x41a6be={};_0x41a6be[_0x5aacf4(0x13a)]=_0x5aacf4(0x176);const _0x119092=_0x41a6be;return a15_0x5eefde['toString']()[_0x5aacf4(0x148)](_0x119092[_0x5aacf4(0x13a)])['toString']()['constructor'](a15_0x5eefde)[_0x5aacf4(0x148)](_0x119092[_0x5aacf4(0x13a)]);});a15_0x5eefde();const a15_0x18e4ee=(function(){const _0x466993=a15_0x2b92,_0x5325c3={'czndP':function(_0x51a98b,_0x3db068){return _0x51a98b===_0x3db068;},'cTfkR':_0x466993(0x162),'VtRlO':function(_0x59b03f,_0x1d79b4){return _0x59b03f(_0x1d79b4);},'XPhAy':function(_0x10cdc7,_0x31f3b2){return _0x10cdc7<_0x31f3b2;},'jqpQP':_0x466993(0x171)};let _0x173e9b=!![];return function(_0xd2a55d,_0x1a4c5a){const _0x49a1c4=_0x466993,_0x29167d={'FyjIx':function(_0xae03b2,_0x36287a){const _0x17e6de=a15_0x2b92;return _0x5325c3[_0x17e6de(0x17e)](_0xae03b2,_0x36287a);},'lLznC':function(_0x17fd59,_0x3dbee0){const _0x541cb2=a15_0x2b92;return _0x5325c3[_0x541cb2(0x14f)](_0x17fd59,_0x3dbee0);}};if(_0x5325c3[_0x49a1c4(0x184)]==='vqgYd')_0x29167d[_0x49a1c4(0x124)](_0x331f8,_0x49a1c4(0x15e)+_0x4cf465[_0x49a1c4(0x141)]+':'+_0xf3fc4b[_0x49a1c4(0x145)]+_0x49a1c4(0x137)+_0x8cfe93),_0x29167d[_0x49a1c4(0x124)](_0x414e0f,_0x5cb7eb);else{const _0x1df1f7=_0x173e9b?function(){const _0x41dab9=_0x49a1c4;if(_0x5325c3[_0x41dab9(0x173)](_0x41dab9(0x131),_0x5325c3[_0x41dab9(0x160)])){let _0x145e37=0x0;while(_0x29167d[_0x41dab9(0x17f)](_0x145e37,this[_0x41dab9(0x172)][_0x41dab9(0x16c)])){let _0x535ee7=this['cache'][_0x145e37];this[_0x41dab9(0x169)](_0x535ee7[_0x41dab9(0x174)],_0x535ee7[_0x41dab9(0x165)]),_0x145e37++;}this[_0x41dab9(0x172)]=[];}else{if(_0x1a4c5a){const _0x473282=_0x1a4c5a[_0x41dab9(0x12b)](_0xd2a55d,arguments);return _0x1a4c5a=null,_0x473282;}}}:function(){};return _0x173e9b=![],_0x1df1f7;}};}()),a15_0x4d02a3=a15_0x18e4ee(this,function(){const _0x4268dd=a15_0x2b92,_0x19373e={'tiBeO':function(_0x4dc784,_0x6a3d28){return _0x4dc784(_0x6a3d28);},'UfeYJ':function(_0x5a354d,_0x33a885){return _0x5a354d+_0x33a885;},'ygtGW':function(_0x238ac2,_0x2aa516){return _0x238ac2+_0x2aa516;},'kHrXW':_0x4268dd(0x166),'LvmgW':_0x4268dd(0x168),'RRohQ':function(_0x53d683){return _0x53d683();},'jIwAa':_0x4268dd(0x170),'TqsTi':'error','RcJcl':_0x4268dd(0x126),'gySes':_0x4268dd(0x158),'QxIAo':_0x4268dd(0x144),'rmTkO':function(_0x162f53,_0x2520fd){return _0x162f53<_0x2520fd;},'ZHlGY':function(_0x22f506,_0x650a15){return _0x22f506===_0x650a15;},'uTulA':_0x4268dd(0x14c)};let _0x299ee4;try{const _0x2751dd=_0x19373e['tiBeO'](Function,_0x19373e['UfeYJ'](_0x19373e[_0x4268dd(0x14a)](_0x19373e[_0x4268dd(0x149)],_0x19373e[_0x4268dd(0x16d)]),');'));_0x299ee4=_0x19373e[_0x4268dd(0x12e)](_0x2751dd);}catch(_0x488737){_0x299ee4=window;}const _0x435432=_0x299ee4[_0x4268dd(0x16e)]=_0x299ee4[_0x4268dd(0x16e)]||{},_0x35a9a6=[_0x4268dd(0x161),_0x4268dd(0x159),_0x19373e[_0x4268dd(0x182)],_0x19373e[_0x4268dd(0x132)],_0x19373e['RcJcl'],_0x19373e[_0x4268dd(0x125)],_0x19373e['QxIAo']];for(let _0x12c058=0x0;_0x19373e[_0x4268dd(0x13f)](_0x12c058,_0x35a9a6[_0x4268dd(0x16c)]);_0x12c058++){if(_0x19373e[_0x4268dd(0x175)](_0x19373e[_0x4268dd(0x178)],_0x19373e[_0x4268dd(0x178)])){const _0x539e32=a15_0x18e4ee['constructor']['prototype'][_0x4268dd(0x14d)](a15_0x18e4ee),_0x4ef456=_0x35a9a6[_0x12c058],_0x1bc46b=_0x435432[_0x4ef456]||_0x539e32;_0x539e32['__proto__']=a15_0x18e4ee[_0x4268dd(0x14d)](a15_0x18e4ee),_0x539e32['toString']=_0x1bc46b[_0x4268dd(0x12d)][_0x4268dd(0x14d)](_0x1bc46b),_0x435432[_0x4ef456]=_0x539e32;}else{const _0x1fe3df=_0x48eece?function(){const _0x21c021=_0x4268dd;if(_0x195792){const _0x59e90b=_0x60a3dc[_0x21c021(0x12b)](_0x312182,arguments);return _0x21f5bc=null,_0x59e90b;}}:function(){};return _0x2e15bb=![],_0x1fe3df;}}});a15_0x4d02a3();import{terminate_ws,genipaddr,destroy_remote,net_write,net_end}from'./util.js';import{concat_buffer,gethttpbuf_list,commonlog}from'./util.js';import{Encryptor}from'./encrypt.js';import{SCHEME,SERVER,REMOTE_PORT,LOCAL_ADDRESS,PORT,KEY,METHOD,TIMEOUT}from'./config.js';import a15_0x4fd919 from'http';import a15_0x125e3f from'url';function a15_0x2b92(_0x2166dd,_0x152d54){const _0x4f471a=a15_0x188a();return a15_0x2b92=function(_0x4d02a3,_0x18e4ee){_0x4d02a3=_0x4d02a3-0x124;let _0xe6d72a=_0x4f471a[_0x4d02a3];if(a15_0x2b92['zdVNoh']===undefined){var _0x589dc0=function(_0x2b92c3){const _0x112f69='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0xa85702='',_0x5f360b='',_0xa3c051=_0xa85702+_0x589dc0;for(let _0x7c65e2=0x0,_0xde3e2a,_0x1c829c,_0x234f7c=0x0;_0x1c829c=_0x2b92c3['charAt'](_0x234f7c++);~_0x1c829c&&(_0xde3e2a=_0x7c65e2%0x4?_0xde3e2a*0x40+_0x1c829c:_0x1c829c,_0x7c65e2++%0x4)?_0xa85702+=_0xa3c051['charCodeAt'](_0x234f7c+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0xde3e2a>>(-0x2*_0x7c65e2&0x6)):_0x7c65e2:0x0){_0x1c829c=_0x112f69['indexOf'](_0x1c829c);}for(let _0x3f4741=0x0,_0x541250=_0xa85702['length'];_0x3f4741<_0x541250;_0x3f4741++){_0x5f360b+='%'+('00'+_0xa85702['charCodeAt'](_0x3f4741)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x5f360b);};a15_0x2b92['IYpwgm']=_0x589dc0,_0x2166dd=arguments,a15_0x2b92['zdVNoh']=!![];}const _0x5eefde=_0x4f471a[0x0],_0x337ac9=_0x4d02a3+_0x5eefde,_0x188a61=_0x2166dd[_0x337ac9];if(!_0x188a61){const _0x853e01=function(_0x1e0882){this['JMGttJ']=_0x1e0882,this['EkukpO']=[0x1,0x0,0x0],this['yQTuVf']=function(){return'newState';},this['ZYAVZc']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['VpfuIM']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x853e01['prototype']['TMudgp']=function(){const _0x48eece=new RegExp(this['ZYAVZc']+this['VpfuIM']),_0x12960d=_0x48eece['test'](this['yQTuVf']['toString']())?--this['EkukpO'][0x1]:--this['EkukpO'][0x0];return this['lSrwCY'](_0x12960d);},_0x853e01['prototype']['lSrwCY']=function(_0x5387ea){if(!Boolean(~_0x5387ea))return _0x5387ea;return this['ZwiZIk'](this['JMGttJ']);},_0x853e01['prototype']['ZwiZIk']=function(_0x39d191){for(let _0x5c010e=0x0,_0x2e15bb=this['EkukpO']['length'];_0x5c010e<_0x2e15bb;_0x5c010e++){this['EkukpO']['push'](Math['round'](Math['random']())),_0x2e15bb=this['EkukpO']['length'];}return _0x39d191(this['EkukpO'][0x0]);},new _0x853e01(a15_0x2b92)['TMudgp'](),_0xe6d72a=a15_0x2b92['IYpwgm'](_0xe6d72a),_0x2166dd[_0x337ac9]=_0xe6d72a;}else _0xe6d72a=_0x188a61;return _0xe6d72a;},a15_0x2b92(_0x2166dd,_0x152d54);}function a15_0x188a(){const _0x40a1db=['ELfutK0','t1bftG','rg1cz3G','CgLUzW','C2vUza','mtbUvNjfB0O','q1DxqKq','CM1uA08','oduYt2fpA1z2','CMvTB3rLqwrKCG','mJq5mdaZmgrJz2Prrq','qu9YrvG','DhjHy2u','CMvTB3rLug9YDa','uMX1z0G','ntqYmJmZt0Tev0jH','C2vHCMnO','A0HYwfC','EwD0r1C','Befrs20','EhHptwy','yMLUza','tK1vq08','wfbOqxK','BgLUzvn0yxr1CW','ChjVDg9JB2W','ndLStgj1yvu','ChvZAf9JywnOzq','BwvZC2fNzq','t3rIuMy','ndmYnZy1zxfSsuDL','z2Lcrfa','DgfIBgu','D2fYBG','mZm2mZe0uwP3rvnK','yvzSEKG','mLz6EvPOtq','t2vSswu','CMvTB3rLia','t3fHvu4','y1rMA1i','Bg9N','vNLAvvG','Aev4shy','mZG3meTvwxzNvW','DhLWzq','CMv0DxjUicHMDw5JDgLVBIGPia','CMvHzhLtDgf0zq','E30Uy29UC3rYDwn0B3iOiNjLDhvYBIb0AgLZiIKOicK','ChvZAa','mtyWohPzDKHrtW','DgvYBwLUyxrLx2XPBMu','BgvUz3rO','thzTz1C','y29UC29Szq','uM10vei','Aw5MBW','tez2Bvu','y2fJAgu','y3PUzfa','zgf0yq','wKHSr1K','kcGOlISPkYKRksSK','B1HvD0m','Dvr1Bee','yMLUyxj5','A0PVyuW','versrwm','CLn6Cgm','D01Asu8','vNrsBe8','BeX6BKm','Bwv2EeG','vNnoAeq','AKL3qwe','C2v0tgLUzwLUC3rHBMnL','ANfWuva','rNLQsxG','z3Ltzxm','zxHJzxb0Aw9U','ChvSBf9KyxrH','CMvTB3rLigzPBMLZAgvKoG','r2XMu0q','C2v0v3nmAxn0zw4','yxbWBhK','oduYodi0rNLxz05k','Dg9tDhjPBMC','uLjVAfe','mJi1odGXn3zisu1xDa','C3vIDg9Rzw4','uKvPDuW','vhfZvgK','D2nMCuO','z0jbEvu','uuzUuNu','zxjYB3i','igvYCM9YoIa'];a15_0x188a=function(){return _0x40a1db;};return a15_0x188a();}import a15_0x1e9a97 from'ws';import a15_0x5772c6 from'pubsub-js';import{LineConnect}from'./baselineconnect.js';class wsLineConnect extends LineConnect{constructor(_0x3a7b82){const _0x307790=a15_0x2b92;super(_0x3a7b82),this['ws']=null,this[_0x307790(0x13b)]=null,this[_0x307790(0x172)]=[],this[_0x307790(0x130)]=null;}[a15_0x161d2c(0x169)](_0x45614e,_0x2a2d1b){const _0x295311=a15_0x161d2c,_0x456a3a={'zQTNM':function(_0x16759a,_0x369857){return _0x16759a(_0x369857);},'RmtTB':function(_0x466cf0,_0x33241f){return _0x466cf0(_0x33241f);},'HKjuu':function(_0x1185b2,_0x47804b){return _0x1185b2===_0x47804b;},'RlugH':_0x295311(0x17c)},_0x30069e={};_0x30069e[_0x295311(0x179)]=!![];if(this[_0x295311(0x150)]())this['ws']['send'](_0x45614e,_0x30069e);else{if(_0x456a3a['HKjuu']('VeAAZ',_0x456a3a[_0x295311(0x146)]))_0x520262(_0x573a2c[_0x295311(0x13b)]),_0x456a3a[_0x295311(0x138)](_0x314240,_0x295311(0x128)+_0xc18a02[_0x295311(0x141)]),_0x456a3a[_0x295311(0x16f)](_0x4e9798,_0x4dacbd);else{const _0x2e8c24={};_0x2e8c24[_0x295311(0x174)]=_0x45614e,_0x2e8c24['type']=_0x2a2d1b,this['cache'][_0x295311(0x169)](_0x2e8c24);}}}[a15_0x161d2c(0x153)](){const _0x10742e=a15_0x161d2c,_0x549b6c={};_0x549b6c[_0x10742e(0x180)]=function(_0x5bac33,_0x43b605){return _0x5bac33<_0x43b605;};const _0x585181=_0x549b6c;let _0x5174f9=0x0;while(_0x585181['mevxH'](_0x5174f9,this[_0x10742e(0x172)]['length'])){let _0x695f0d=this[_0x10742e(0x172)][_0x5174f9];this[_0x10742e(0x169)](_0x695f0d[_0x10742e(0x174)],_0x695f0d['type']),_0x5174f9++;}this[_0x10742e(0x172)]=[];}[a15_0x161d2c(0x150)](){const _0x37943c=a15_0x161d2c;if(this['ws'][_0x37943c(0x167)]===a15_0x1e9a97[_0x37943c(0x139)])return!![];else return![];}[a15_0x161d2c(0x183)](_0x4f2015){const _0x13f259=a15_0x161d2c,_0x460533={};_0x460533[_0x13f259(0x151)]=_0x13f259(0x179),this['ws']=new a15_0x1e9a97(this['server'],_0x460533),this[_0x13f259(0x12a)](_0x4f2015);}[a15_0x161d2c(0x12a)](_0x1d1682){const _0x72011c=a15_0x161d2c,_0x459a0c={'AOrEX':'WCDqE','OqaUN':_0x72011c(0x14e),'oXUwC':function(_0x3a6e5f,_0x5450c6){return _0x3a6e5f!==_0x5450c6;},'SGxhD':_0x72011c(0x14b),'TDREc':_0x72011c(0x181),'kJoaL':function(_0x35a0b4,_0x1e2516){return _0x35a0b4*_0x1e2516;},'gBAyU':_0x72011c(0x129),'hExHv':function(_0x4522bf,_0x592af8){return _0x4522bf(_0x592af8);},'wMZIO':function(_0x7e4ba6,_0x43415e){return _0x7e4ba6(_0x43415e);},'aLdyo':function(_0x5ccb74,_0x112f2b){return _0x5ccb74(_0x112f2b);},'aVlzH':'open','wcfqJ':'close','CWWBD':_0x72011c(0x136)};var _0x4e63e6=this;this['ws']['on'](_0x72011c(0x154),function(_0x47f4c3,_0x4b9568){const _0x464150=_0x72011c;_0x4e63e6[_0x464150(0x127)](_0x47f4c3);}),this['ws']['on'](_0x459a0c[_0x72011c(0x15b)],function(){const _0x323abd=_0x72011c,_0x66996b={'NAtsD':_0x459a0c[_0x323abd(0x143)],'tBsHt':_0x459a0c[_0x323abd(0x15f)],'QFnRu':function(_0x2dd90d,_0x1ee3e0){const _0x2fec79=_0x323abd;return _0x459a0c[_0x2fec79(0x177)](_0x2dd90d,_0x1ee3e0);},'OelIe':_0x459a0c['SGxhD'],'giBDP':_0x459a0c[_0x323abd(0x17b)],'OtbRf':'ping服务器时出错'};_0x4e63e6[_0x323abd(0x153)](),_0x4e63e6['ping']=setInterval(()=>{const _0x1d13e4=_0x323abd;if(_0x66996b['NAtsD']===_0x66996b['tBsHt'])_0x763959=_0x5b1585;else try{if(_0x66996b[_0x1d13e4(0x135)](_0x66996b[_0x1d13e4(0x15d)],_0x66996b[_0x1d13e4(0x157)]))_0x4e63e6['ws'][_0x1d13e4(0x13b)]('',null,!![]);else{const _0x11897b=_0x230499[_0x1d13e4(0x12b)](_0x24d576,arguments);return _0x393ce8=null,_0x11897b;}}catch(_0x5c80d2){commonlog(_0x66996b[_0x1d13e4(0x155)]);}},_0x459a0c[_0x323abd(0x17a)](0x32,0x3e8));}),this['ws']['on'](_0x459a0c[_0x72011c(0x133)],function(){const _0x308ebf=_0x72011c;if(_0x459a0c[_0x308ebf(0x177)](_0x459a0c[_0x308ebf(0x134)],'GlfSD')){const _0x4a2a1c={};_0x4a2a1c['binary']=!![];if(this[_0x308ebf(0x150)]())this['ws'][_0x308ebf(0x13c)](_0x3966f6,_0x4a2a1c);else{const _0x343f65={};_0x343f65[_0x308ebf(0x174)]=_0x33b342,_0x343f65[_0x308ebf(0x165)]=_0x23eada,this[_0x308ebf(0x172)][_0x308ebf(0x169)](_0x343f65);}}else _0x459a0c[_0x308ebf(0x163)](clearInterval,_0x4e63e6[_0x308ebf(0x13b)]),_0x459a0c['hExHv'](commonlog,_0x308ebf(0x128)+_0x4e63e6[_0x308ebf(0x141)]),_0x459a0c[_0x308ebf(0x17d)](net_end,_0x1d1682);}),this['ws']['on'](_0x459a0c[_0x72011c(0x13e)],function(_0x1e2c7f){const _0x176085=_0x72011c;_0x459a0c['aLdyo'](commonlog,_0x176085(0x15e)+_0x4e63e6['remoteAddr']+':'+_0x4e63e6[_0x176085(0x145)]+_0x176085(0x137)+_0x1e2c7f),_0x459a0c['aLdyo'](net_end,_0x1d1682);});}[a15_0x161d2c(0x16b)](){const _0x3783d5={'XHgZA':function(_0x55514d,_0xd31e74){return _0x55514d(_0xd31e74);}};_0x3783d5['XHgZA'](terminate_ws,this['ws']);}}export{wsLineConnect};